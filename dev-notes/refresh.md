## Steps to RUN the data pipeline
1. Change the `currentYear` and `termId` in `env.sh`
2. Run `source env.sh`
3. Run `/scripts/refresh/refresh.py`
  * You will need the master pw and the seed pw

### Steps of the data pipeline (`refresh.py`)

1. `getDict` unlocks a dictionary of passwords. Our old version required that the password would be entered in as it was needed. This allows for the passwords to be entered in the beginning and then the entire process will run.
  *  `/research/askoski_common/bins/seed3.bin` is a random seed filter as a stage of protection for this subprocess
  * `/research/askoski_common/bins/startup.bin` the file that actually has the encrypted dictionaries
2. `refresh` function which runs everything in order
  1. Check if there are no files in `UCBDATA`, this usually means that you are re-running the pipeline before new data has arrived
    1. If there is no data, decrypt files and run the pipeline on the decrypted data
  2. If there are files, most likely means new data has arrived or the last person didn't have the permission to remove the files.
    1. Hash the files using `hash.py`
    2. Encrypt the original files with `encrypt_originals.py`
    3. Remove the original files if you have permission
    4. Move the files over to UCBD2
    5. Test the hashing of the files
      * During hashing, this script will filter the grades file to remove courses that do not have the `EOT` SNAPSHOT_CODE if it is in a row of a previous semester. It will also only keep the most recent row for a given course for a given students, so repeated courses will not show up in a student's enrollments. EOT -> CEN -> WEEK 17
    6. Retrain the RNN and C2V using `/home/askoski/Models-AskOski/retrain.sh`
    7. Refresh user info using `refresh_user_info.py` (major and status is done here)
    8. Refresh user enrollments using `refresh_enrollments.py` (enrollments is done here)
    9. Refresh course data using `refresh_courses_data.py` (makes sure our course list is up to date)
    10. Refresh majors using `refresh_majors.py` (makes sure our majors list is up to date)
    11. Refresh classes api `refresh_classes_from_api.py` (gets classes for next semester)

### Things to know
  * Models need to be trained before refreshing because the lookup tables needed for the refreshing is generated by the models (course2idx, major2idx, etc)
  * Getting classes from the class api is by far the longest part of this process

### Upcoming term id list
  1. 2020 Spring = 2202
  2. 2020 Summer = 2205
  3. 2020 Fall = 2208
  4. 2021 Spring = 2212
  5. 2021 Summer = 2215
  6. 2021 Fall = 2218
  7. 2022 Spring = 2222
  8. 2022 Summer = 2225
  9. 2022 Fall = 2228
  10. 2023 Spring = 2232
  11. 2023 Summer = 2235
